(this.webpackJsonprice_explorer=this.webpackJsonprice_explorer||[]).push([[0],{267:function(e,t){},303:function(e,t,a){},306:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(23),r=a.n(s),i=a(9),l=a(16),o=a(329),d=a(312),j=a(331),u=a(46),b=a(1),p=function(){return Object(b.jsx)(o.a,{className:"header",bg:"dark",variant:"dark",expand:"lg",fixed:"top",children:Object(b.jsxs)(d.a,{fluid:!0,children:[Object(b.jsx)(o.a.Brand,{href:"/",children:"Crop Mapping Explorer"}),Object(b.jsx)(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(b.jsx)(o.a.Collapse,{id:"basic-navbar-nav",children:Object(b.jsxs)(j.a,{className:"me-auto",children:[Object(b.jsx)(j.a.Link,{to:"/phenology",as:u.b,children:"Phenology Explorer"}),Object(b.jsx)(j.a.Link,{to:"/empirical",as:u.b,children:"Empirical Thresholding"}),Object(b.jsx)(j.a.Link,{to:"/classification",as:u.b,children:"Classification"})]})})]})})},h=a(7),m=a(19),O={home:"home",empirical:"empirical",phenology:"phenology",classification:"classification"},f=Object(m.b)({name:O.home,initialState:null,reducers:{setAppName:function(e,t){return t.payload}}}),x=f.actions.setAppName,g=f.reducer;var y=function(){var e=Object(h.b)();return Object(n.useEffect)((function(){e(x(O.home))}),[]),Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:"Hello"})})},v=Object(m.b)({name:"appStatus",initialState:"Ready",reducers:{setStatus:function(e,t){return t.payload}}}),N=(v.actions.setStatus,v.reducer);var S=function(e){var t=Object(h.c)((function(e){return e.appStatus}));return Object(b.jsx)("div",{className:"app-status-bar align-items-center d-flex position-absolute",children:Object(b.jsx)("div",{className:"d-flex",children:Object(b.jsxs)("h6",{className:"mb-0",children:["App Status: ",Object(b.jsx)("b",{children:t})]})})})},_=a(37),A=a(317),C=a(318),I=a(333),k=(a(231),a(17)),T=a.n(k),L=a(146),w=["sowing","peak","harvesting"],R={upload:"Upload boundary file (shp)",MORANG:"MORANG",SUNSARI:"SUNSARI",JHAPA:"JHAPA",MAHOTTARI:"MAHOTTARI",PARSA:"PARSA",RAUTAHAT:"RAUTAHAT",SAPTARI:"SAPTARI",SARLAHI:"SARLAHI",SIRAHA:"SIRAHA",BARA:"BARA",DHANUSHA:"DHANUSHA",CHITAWAN:"CHITAWAN",NAWALPARASI_E:"NAWALPARASI_E",KAPILBASTU:"KAPILBASTU",NAWALPARASI_W:"NAWALPARASI_W",RUPANDEHI:"RUPANDEHI",BANKE:"BANKE",BARDIYA:"BARDIYA",DANG:"DANG",KAILALI:"KAILALI",KANCHANPUR:"KANCHANPUR"},P={radar:{"COPERNICUS/S1_GRD":"Sentinel-1 SAR GRD: C-band Synthetic Aperture Radar Ground Range Detected, log scaling"},optical:{"MODIS/006/MOD13Q1":"MOD13Q1.006 Terra Vegetation Indices 16-Day Global 250m","LANDSAT/LT05/C01/T1_TOA":"USGS Landsat 5 TM Collection 1 Tier 1 TOA Reflectance","LANDSAT/LT05/C01/T1_SR":"USGS Landsat 5 Surface Reflectance Tier 1","LANDSAT/LC08/C01/T1_TOA":"USGS Landsat 8 Collection 1 Tier 1 TOA Reflectance","COPERNICUS/S2":"Sentinel-2 MSI: MultiSpectral Instrument, Level-1C","COPERNICUS/S2_SR":"Sentinel-2 MSI: MultiSpectral Instrument, Level-2A"}},D={VH:"VH band",VV:"VV band","VH/VV":"VH/VV (cross ratio)"},E={NDVI:"NDVI",EVI:"EVI",NDWI:"NDWI",MNDWI:"MNDWI"},G={"Google Maps":{url:"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",attribution:"Google"},"Google Satellite":{url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",attribution:"Google"},"Google Terrain":{url:"https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}",attribution:"Google"},"ESRI World Imagery":{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},U=Object(m.b)({name:"editing",initialState:!1,reducers:{toggle:function(e){return!e}}}),M=(U.actions.toggle,U.reducer),V=a(34),H=a.n(V),B=a(140),F=a(141),K=a.n(F),W=a(313),z=a(330),J=a(327),q=a(332),X=a(142),Y=a.n(X),Q=a(13),$=a.n(Q),Z=a(2),ee=Object(m.b)({name:"samples",initialState:{selected:null,geojson:{type:"FeatureCollection",features:[]},classProperty:{name:null,positiveValue:null},phenology:{start_date:"2019-01",end_date:"2019-12"}},reducers:{replace:function(e,t){return e.geojson=t.payload,e.selected=null,e},addFeatures:function(e,t){return e.geojson.features.push(t.payload),e},deleteFeature:function(e,t){var a=e.geojson.features.findIndex((function(e,a){return e.properties[be]===t.payload}));e.geojson.features.splice(a,1)},selectFeature:function(e,t){e.selected=t.payload},setClassProperty:function(e,t){e.classProperty=Object(Z.a)(Object(Z.a)({},e.classProperty),t.payload)},changePhenologyDate:function(e,t){e.phenology=Object(Z.a)(Object(Z.a)({},e.phenology),t.payload)}}}),te=ee.actions,ae=te.replace,ne=(te.addFeatures,te.deleteFeature),ce=te.selectFeature,se=te.setClassProperty,re=te.changePhenologyDate,ie=ee.reducer,le=a(143),oe=a(314),de=a(315),je=a(316),ue=a(145),be="_$id";function pe(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=(t[0],t[1],Object(n.useState)(null)),c=Object(i.a)(a,2),s=c[0],r=c[1],l=Object(h.c)((function(e){return e.samples}));Object(h.b)();return Object(n.useEffect)((function(){if("number"===typeof l.selected){var e=l.geojson.features.filter((function(e){return e.properties[be]==l.selected}))[0],t=Object(_.a)(e.geometry.coordinates).reverse();Ie(t),Ne&&Ne.eachLayer((function(e){e.feature.properties[be]===l.selected&&e.openPopup(t)})),r(function(e){var t={};if(Object.entries(e.properties).forEach((function(e){var a=Object(i.a)(e,2),n=a[0],c=a[1];if(n.endsWith("_feature")){var s=n.split("_"),r=new Date(Number.parseInt(s[s.length-2])).getTime();t[r]=c}})),0===Object.keys(t).length)return null;var a=[["date","value"]];return Object.keys(t).sort((function(e,t){return Number.parseInt(e)-Number.parseInt(t)})).forEach((function(e){var n=Array(a[0].length).fill(null);n[0]=new Date(Number.parseInt(e)),n[1]=t[e],a.push(n)})),a}(e))}}),[l.selected,l.geojson]),Object(n.useEffect)((function(){null!==l.classProperty.name&&Ne.eachLayer((function(e){e.feature.properties[l.classProperty.name]==l.classProperty.positiveValue?e.setStyle({radius:3,fillColor:"red",stroke:.2,color:"black",opacity:.5,fillOpacity:1}):e.setStyle({radius:3,fillColor:"blue",stroke:.2,color:"black",opacity:.5,fillOpacity:1})}))}),[l.classProperty]),Object(b.jsxs)("div",{className:"sidebar h-100 d-flex flex-column",children:[Object(b.jsx)("div",{className:"sample-container px-2 pt-2",children:Object(b.jsx)(Oe,{})}),Object(b.jsx)("div",{className:"chart-canvas p-2",children:Object(b.jsx)(z.a,{className:"h-100 w-100",children:Object(b.jsx)(z.a.Body,{className:"p-2",children:s?Object(b.jsx)(le.a,{width:"100%",height:"90%",chartType:"LineChart",loader:Object(b.jsx)("div",{children:"Loading Chart..."}),data:s,options:{hAxis:{title:"Date",format:"yyyy-MM-dd"},vAxis:{title:"Value"},legend:{position:"bottom"}},rootProps:{"data-testid":"1"}}):"Click on an sample to see its phenology"})})})]})}var he={radius:3,fillColor:"red",stroke:.2,color:"black",opacity:.5,fillOpacity:1},me={radius:3,fillColor:"blue",stroke:.2,color:"black",opacity:.5,fillOpacity:1},Oe=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=(t[0],t[1],Object(n.useState)(null)),c=Object(i.a)(a,2),s=(c[0],c[1],Object(h.c)((function(e){return e.samples}))),r=Object(h.b)();Object(n.useEffect)((function(){null!==s.classProperty.name&&Ne.eachLayer((function(e){e.feature.properties[s.classProperty.name]===s.classProperty.positiveValue?e.setStyle(he):e.setStyle(me)}))}),[s.classProperty]);var l=function(){var e=Object(B.a)(H.a.mark((function e(t){var a,n,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files&&t.target.files.length>0)){e.next=15;break}return a=t.target.files[0],e.t0=Y.a,e.next=5,a.arrayBuffer();case 5:return e.t1=e.sent,e.next=8,(0,e.t0)(e.t1);case 8:(n=e.sent).features.forEach((function(e,t){e.properties[be]=t+1})),(c=$.a.geoJSON(n,{pointToLayer:function(e,t){return e.properties[s.classProperty.name]===s.classProperty.positiveValue?$.a.circleMarker(t,he):$.a.circleMarker(t,me)},onEachFeature:function(e,t){t.bindPopup((function(e){return K.a.renderToString((t=e.feature.properties,Object(b.jsxs)(W.a,{striped:!0,bordered:!0,hover:!0,children:[Object(b.jsxs)("thead",{children:[Object(b.jsx)("th",{children:"key"}),Object(b.jsx)("th",{children:"value"})]}),Object(b.jsx)("tbody",{children:Object.entries(t).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:a}),Object(b.jsx)("td",{children:n})]},a)}))})]})));var t}),{maxHeight:"400",maxWidth:"400"})}})).addTo(ge),Se(c),Ae(),r(ae(n));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(z.a,{className:"h-100",children:[Object(b.jsx)(z.a.Header,{children:Object(b.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(b.jsx)("div",{children:Object(b.jsxs)("h6",{className:"m-0 p-0",children:["Samples ","(count: ".concat(s.geojson.features.length,")")]})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(L.a,{variant:"light",size:"sm",className:"h-100 w-100 px-0",as:"label",htmlFor:"sample-upload",children:Object(b.jsx)(oe.a,{})}),Object(b.jsx)("input",{type:"file",className:"d-none",id:"sample-upload",onChange:l})]}),Object(b.jsx)("div",{children:Object(b.jsx)(L.a,{variant:"light",size:"sm",className:"h-100 w-100 px-0",onClick:function(e){console.log(s.geojson);var t=new Blob([JSON.stringify(s.geojson)],{type:"application/json"});Object(ue.saveAs)(t,"samples.geojson")},children:Object(b.jsx)(de.a,{})})})]})}),Object(b.jsxs)(z.a.Body,{className:"p-2",children:[Object(b.jsx)("div",{className:"container card mb-2",children:Object(b.jsxs)("div",{className:"p-2",children:[Object(b.jsxs)("div",{className:"row align-items-center mb-2",children:[Object(b.jsx)("div",{className:"col-auto",children:"Class field:"}),Object(b.jsx)("div",{className:"col",children:Object(b.jsxs)(J.a.Select,{className:"w-100",value:s.classProperty.name||"",disabled:!s.geojson.features.length,onChange:function(e){return t=e.target.value,void r(se({name:t,positiveValue:null}));var t},children:[Object(b.jsx)("option",{}),0!==s.geojson.features.length&&Object.keys(s.geojson.features[0].properties).map((function(e){return Object(b.jsx)("option",{children:e},e)}))]})})]}),Object(b.jsxs)("div",{className:"row align-items-center",children:[Object(b.jsx)("div",{className:"col-auto",children:"Class value:"}),Object(b.jsx)("div",{className:"col",children:Object(b.jsxs)(J.a.Select,{value:s.classProperty.positiveValue||"",disabled:!s.classProperty.name,onChange:function(e){return t=e.target.value,void r(se({positiveValue:t}));var t},children:[Object(b.jsx)("option",{}),0!==s.geojson.features.length&&Object(_.a)(new Set(s.geojson.features.map((function(e){return e.properties[s.classProperty.name]})))).map((function(e){return Object(b.jsx)("option",{children:e},e)}))]})})]})]})}),Object(b.jsx)(q.a,{className:"sample-list",children:s.geojson&&s.geojson.features.map((function(e,t){return Object(b.jsx)(fe,{feature:e,idx:t})}))})]})]})},fe=function(e){var t=e.idx,a=e.feature,n=Object(h.c)((function(e){return e.samples})),c=Object(h.b)();return Object(b.jsx)(q.a.Item,{action:!0,className:"px-3 py-1",onClick:function(){return function(e){c(ce(e))}(a.properties[be])},active:a.properties[be]==n.selected,style:{backgroundColor:a.properties[n.classProperty.name]==n.classProperty.positiveValue?"lightgreen":null},children:Object(b.jsxs)("div",{className:"d-flex align-items-center flex-row justify-content-between",children:[Object(b.jsx)("div",{children:"".concat(a.properties[be]," - ").concat(a.properties[n.classProperty.name])}),Object(b.jsx)("div",{children:Object(b.jsx)(L.a,{variant:"light",size:"sm",className:"h-100 w-100 px-0 bg-transparent",as:"label",onClick:function(e){return function(e,t){e.stopPropagation(),console.log(t),Ne.eachLayer((function(e){t===e.feature.properties[be]&&Ne.removeLayer(e)})),c(ne(t)),c(ce(null))}(e,a.properties[be])},children:Object(b.jsx)(je.a,{})})})]})},t)},xe=a(148);delete $.a.Icon.Default.prototype._getIconUrl,$.a.Icon.Default.mergeOptions({iconRetinaUrl:a(282).default,iconUrl:a(283).default,shadowUrl:a(284).default});var ge=null,ye=null,ve=[],Ne=null,Se=function(e){return Ne=e},_e=function(e){ge&&ye.current&&e.forEach((function(e){e.layer.addTo(ge),ye.current.addOverlay(e.layer,e.name),ve.push(e.layer)}))},Ae=function(){Ne&&ge&&ye.current&&(Ne.addTo(ge),ye.current.addOverlay(Ne,"samples"))},Ce=function(e){ve.forEach((function(e){ye.current.removeLayer(e),ge.removeLayer(e)}))},Ie=function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];ge&&ge.panTo([a,n])};var ke=function(e){var t=e.info;return Object(b.jsx)("div",{className:"leaflet-bottom leaflet-left",children:Object(b.jsx)("div",{className:"leaflet-control leaflet-bar info-board",children:Object(xe.a)(t)})})},Te=function(e){var t=e.info,a=Object(h.c)((function(e){return e.appName})),c=Object(n.useRef)(),s=Object(h.c)((function(e){return e.samples}));return Object(n.useEffect)((function(){ye=c,setTimeout((function(){_e(ve),Ae()}),400)}),[]),Object(n.useEffect)((function(){if(s.selected){var e=s.geojson.features.filter((function(e){return e.properties[be]===s.selected}))[0],t=Object(_.a)(e.geometry.coordinates).reverse();Ie(t)}}),[s.selected]),Object(n.useEffect)((function(){ge&&ge.invalidateSize()}),[a]),Object(b.jsxs)(A.a,{center:[28.5973518,83.54495724],zoom:8,id:"map",whenCreated:function(e){ge=e},children:[Object(b.jsx)(C.a,{ref:c,children:Object.entries(G).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(b.jsx)(C.a.BaseLayer,{name:a,checked:"Google Maps"===a,children:Object(b.jsx)(I.a,{url:n.url,attribution:n.attribution})},a)}))}),"phenology"!==a?Object(b.jsx)(ke,{info:t}):null]})},Le=a(320),we=a(319),Re=a(147),Pe=a(321),De=a(322),Ee=a(323),Ge=a(324),Ue=a(150),Me=a(33),Ve=a.n(Me),He=a(11),Be=Object(m.b)({name:"dataset",initialState:{name:"COPERNICUS/S1_GRD",cloud:"15",feature:"VH",composite:"median",composite_days:"15",ascd:!1,desc:!0,boundary:"CHITAWAN",boundary_file:null,crop_mask:"projects/testee-319020/assets/terai_agri_mask",phenology_start_date:"2019-01-01",phenology_end_date:"2020-01-01"},reducers:{update:function(e,t){return Object(Z.a)(Object(Z.a)({},e),t.payload)},changeDataSource:function(e,t){var a=t.payload;return e.name=a,a in P.radar?e.feature="VH":a in P.optical&&(e.feature="NDVI",e.cloud="15"),e}}}),Fe=Be.actions,Ke=Fe.update,We=Fe.changeDataSource,ze=Be.reducer;function Je(e){e.disabled;var t=Object(h.c)((function(e){return e.dataset})),a=Object(h.b)(),n=function(e,t){a(Ke(Object(He.a)({},e,t)))};return Object(b.jsxs)(z.a,{className:"mb-2 border-secondary",children:[Object(b.jsx)(z.a.Header,{children:Object(b.jsx)("h6",{className:"m-0 p-0",children:"Satellite Dataset"})}),Object(b.jsxs)(z.a.Body,{children:[Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"dataset_name",className:"mb-2 align-items-center",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:4,children:"Dataset"}),Object(b.jsx)(Re.a,{xs:8,children:Object(b.jsx)(J.a.Select,{onChange:function(e){a(We(e.target.value))},value:t.name,children:Object.entries(P).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(b.jsx)("optgroup",{label:a,children:Object.entries(n).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(b.jsx)("option",{value:a,children:n},a)}))},a)}))})})]}),t.name in P.optical?Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"dataset_cloud",className:"align-items-center mb-2",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:"auto",children:"Cloud cover (%)"}),Object(b.jsx)(Re.a,{children:Object(b.jsx)(J.a.Control,{type:"number",min:"0",max:"100",step:"1",value:t.cloud,onChange:function(e){return n("cloud",e.target.value)}})})]}):null,Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"dataset_orbit",className:"mb-2",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:4,children:"Orbit"}),Object(b.jsxs)(Re.a,{xs:8,children:[Object(b.jsx)(J.a.Check,{type:"checkbox",id:"desc",name:"desc",label:"Descending",checked:t.desc,onChange:function(e){return n("desc",e.target.checked)}}),Object(b.jsx)(J.a.Check,{type:"checkbox",id:"ascd",name:"ascd",label:"Ascending",checked:t.ascd,onChange:function(e){return n("ascd",e.target.checked)}})]})]}),Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"dataset_feature",className:"mb-2 align-items-center",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:4,children:"Feature"}),Object(b.jsx)(Re.a,{xs:8,children:Object(b.jsx)(J.a.Select,{onChange:function(e){return n("feature",e.target.value)},value:t.feature,children:t.name in P.radar?Object.entries(D).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(b.jsx)("option",{value:a,children:n},a)})):Object.entries(E).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(b.jsx)("option",{value:a,children:n},a)}))})})]}),Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"dataset_composite",className:"mb-2 align-items-center",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:4,children:"Composite Type"}),Object(b.jsx)(Re.a,{xs:8,children:Object(b.jsx)(J.a.Select,{onChange:function(e){return n("composite",e.target.value)},value:t.composite,children:["minimum","maximum","median","mean","mode"].map((function(e){return Object(b.jsx)("option",{value:e,children:e},e)}))})})]}),Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"dataset_composite_days",className:"mb-2 align-items-center",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:4,children:"Composite Days"}),Object(b.jsx)(Re.a,{xs:8,children:Object(b.jsx)(J.a.Control,{type:"number",onChange:function(e){return n("composite_days",e.target.value)},value:t.composite_days})})]})]})]})}var qe=function(e){var t=Object(h.c)((function(e){return e.dataset})),a=Object(h.b)(),n=function(e,t){a(Ke(Object(He.a)({},e,t)))};return Object(b.jsxs)(z.a,{className:"mb-2 border-secondary",children:[Object(b.jsx)(z.a.Header,{children:Object(b.jsx)("h6",{className:"m-0 p-0",children:"Auxiliary Datasets"})}),Object(b.jsxs)(z.a.Body,{children:[Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"dataset_boundary",className:"mb-2 align-items-center",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:4,children:"Boundary"}),Object(b.jsx)(Re.a,{xs:8,children:Object(b.jsx)(J.a.Select,{onChange:function(e){return n("boundary",e.target.value)},value:t.boundary,children:Object.entries(R).map((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(b.jsx)("option",{value:a,children:n},a)}))})})]}),"upload"===t.boundary?Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"dataset_boundary_file",className:"align-items-center mb-2",children:[Object(b.jsxs)(J.a.Label,{column:!0,xs:4,children:["Boundary file ",Object(b.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(b.jsx)(Re.a,{xs:8,children:Object(b.jsx)(J.a.Control,{type:"file",className:"w-100 form-control",required:!0,name:"boundary_file",onChange:function(e){return n("boundary_file",URL.createObjectURL(e.target.files[0]))}})})]}):null,Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"dataset_cropmask",className:"mb-2 align-items-center",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:4,children:"Crop Mask (GEE asset)"}),Object(b.jsx)(Re.a,{xs:8,children:Object(b.jsx)(J.a.Control,{type:"text",onChange:function(e){return n("crop_mask",e.target.value)},value:t.crop_mask})})]})]})]})},Xe={sowing:"sowing",peak:"peak",harvesting:"harvesting"},Ye=Object.fromEntries(Object.keys(Xe).map((function(e){return[e,{on:!0,start:"",end:"",min:"",max:""}]}))),Qe=Object.fromEntries(Object.keys(Xe).map((function(e){return[e,function(t,a){return t[e]=Object(Z.a)(Object(Z.a)({},t[e]),a.payload),t}]}))),$e=Object(m.b)({name:"seasons",initialState:Ye,reducers:Qe}),Ze=$e.actions,et=$e.reducer,tt=function(e){var t=e.name,a=e.inputThres,n=e.readOnly,c=(Object(h.c)((function(e){return e.appName})),Object(h.c)((function(e){return e.seasons[t]}))),s=(Object(h.c)((function(e){return e.samples})),Object(h.b)()),r=Ze[t],i=function(e,t){s(r(Object(He.a)({},e,t)))};return Object(b.jsxs)(z.a,{className:"mb-2 border-secondary",children:[Object(b.jsxs)(we.a,{className:"align-items-center gx-2 m-0 card-header",children:[Object(b.jsx)(Re.a,{xs:"auto",children:Object(b.jsx)(J.a.Check,{type:"switch",id:"".concat(t,"_switch"),"aria-label":t,checked:c.on,onChange:function(e){return i("on",e.target.checked)}})}),Object(b.jsx)(Re.a,{xs:"auto",children:Object(b.jsx)("h6",{className:"m-0",children:t.charAt(0).toUpperCase()+t.slice(1)})})]}),Object(b.jsx)("fieldset",{id:"".concat(t,"_fields"),disabled:!c.on,children:Object(b.jsxs)(z.a.Body,{children:[Object(b.jsxs)(J.a.Group,{as:we.a,className:"mb-2",controlId:"".concat(t,"_start_fields"),children:[Object(b.jsxs)(J.a.Label,{column:!0,sm:4,children:["Start date ",Object(b.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(b.jsx)(Re.a,{sm:8,children:Object(b.jsx)(J.a.Control,{type:"date",required:!0,readOnly:n,name:"".concat(t,"_start"),value:c.start,onChange:function(e){return i("start",e.target.value)}})})]}),Object(b.jsxs)(J.a.Group,{as:we.a,className:"mb-2",controlId:"".concat(t,"_end_fields"),children:[Object(b.jsxs)(J.a.Label,{column:!0,sm:4,children:["End date ",Object(b.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(b.jsx)(Re.a,{sm:8,children:Object(b.jsx)(J.a.Control,{type:"date",required:!0,readOnly:n,name:"".concat(t,"_end"),value:c.end,onChange:function(e){return i("end",e.target.value)}})})]}),Object(b.jsxs)(J.a.Group,{as:we.a,className:"mb-2",children:[Object(b.jsxs)(J.a.Label,{column:!0,sm:4,children:["Threshold ",a?Object(b.jsx)("span",{style:{color:"red"},children:"*"}):null]}),Object(b.jsx)(Re.a,{sm:8,children:Object(b.jsxs)(we.a,{className:"gx-1 align-items-center",children:[Object(b.jsx)(Re.a,{children:Object(b.jsx)(J.a.Control,{type:"number",required:a,readOnly:!a||n,id:"".concat(t,"_min"),placeholder:"min",step:"0.01",name:"".concat(t,"_min"),value:c.min,onChange:function(e){return i("min",e.target.value)}})}),Object(b.jsx)(Re.a,{sm:"auto",children:"\u2264 x \u2264"}),Object(b.jsx)(Re.a,{children:Object(b.jsx)(J.a.Control,{type:"number",required:a,readOnly:!a||n,id:"".concat(t,"_max"),placeholder:"max",step:"0.01",name:"".concat(t,"_max"),value:c.max,onChange:function(e){return i("max",e.target.value)}})})]})})]})]})})]})},at="Datasets",nt="Seasons",ct=function(e){var t=e.setInfo,a=Object(h.c)((function(e){return e.csrfToken})),c=Object(h.c)((function(e){return e.dataset})),s=Object(h.c)((function(e){return e.seasons})),r=(Object(h.c)((function(e){return e.editing})),Object(h.b)(),Object(n.useState)(!1)),l=Object(i.a)(r,2),o=l[0],d=l[1],u=Object(n.useState)(!1),p=Object(i.a)(u,2),m=p[0],O=p[1],f=Object(n.useState)({}),x=Object(i.a)(f,2);x[0],x[1];return Object(b.jsx)("div",{className:"sidebar h-100 flex-column",children:Object(b.jsx)(J.a,{method:"POST",onSubmit:function(e){if(e.preventDefault(),!1===e.currentTarget.checkValidity())return e.stopPropagation(),void d(!0);d(!1);var n=new FormData,r={};w.forEach((function(e){s[e].on&&(r[e]=T.a.cloneDeep(s[e]),delete r[e].on)})),r.dataset=T.a.cloneDeep(c),r.dataset.boundary_file&&(n.append("boundary_file",r.dataset.boundary_file),delete r.dataset.boundary_file),n.append("json",new Blob([JSON.stringify(r)],{type:"application/json"})),Ve.a.post("empirical/",n,{baseURL:"/servir/rice-explorer",headers:{"X-CSRFToken":a}}).then((function(e){var a=e.data,n=[];Object.keys(a).forEach((function(e){var c={layer:new $.a.TileLayer(a[e].tile_url),name:e,url:a[e].download_url};n.push(c),a[e].area&&t("Rice area: "+a[e].area.toFixed(3)+" ha")})),_e(n),O(!1)})).catch((function(e){O(!1),alert(e)})),O(!0),Ce()},noValidate:!0,validated:o,children:Object(b.jsxs)(Le.a,{defaultActiveKey:at,unmountOnExit:!1,children:[Object(b.jsx)(we.a,{className:"tabs-nav g-0 flex-wrap",children:Object(b.jsxs)(j.a,{variant:"pills",className:"h-100",children:[Object(b.jsx)(Re.a,{className:"h-100 align-items-center p-1",children:Object(b.jsx)(j.a.Link,{className:"tab-title align-middle w-100 h-100 h6",eventKey:at,children:at})}),Object(b.jsx)(Re.a,{className:"h-100 align-items-center p-1",children:Object(b.jsx)(j.a.Link,{className:"tab-title align-middle h-100 w-100 h6",eventKey:nt,children:nt})})]})}),Object(b.jsx)(we.a,{className:"tabs-content g-0 p-2",children:Object(b.jsx)(Re.a,{children:Object(b.jsxs)(Pe.a,{children:[Object(b.jsx)(De.a,{eventKey:at,children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)(Je,{}),Object(b.jsx)(qe,{})]})}),Object(b.jsxs)(De.a,{eventKey:nt,children:[w.map((function(e){return Object(b.jsx)(tt,{name:e,inputThres:!0,readOnly:m},e)})),Object(b.jsxs)("div",{className:"d-grid gap-2",children:[Object(b.jsx)(L.a,{type:"submit",variant:m?"secondary":"primary",disabled:m,children:m?Object(b.jsxs)("div",{children:["Running...",Object(b.jsx)(Ee.a,{as:"span",animation:"border",size:"sm",role:"status"})]}):"Run"}),Object(b.jsxs)(Ge.a,{id:"export-dropdown",title:"Export",onSelect:function(e,t){},children:[Object(b.jsx)(Ue.a.Item,{eventKey:"season",children:"Export each season"}),Object(b.jsx)(Ue.a.Item,{eventKey:"combined",children:"Export combined"})]})]})]})]})})})]})})})};var st=Object(m.b)({name:"csrfToken",initialState:null,reducers:{setToken:function(e,t){return t.payload}}}),rt=st.actions.setToken,it=st.reducer;var lt=a(325),ot=function(e){var t=e.date,a=e.point,n=e.setMapObj;return Object(b.jsxs)(A.a,{center:a||[28.5973518,83.54495724],zoom:15,className:"small-map",zoomControl:!1,whenCreated:function(e){n((function(a){return Object(Z.a)(Object(Z.a)({},a),{},Object(He.a)({},t,e))}))},children:[Object(b.jsx)(I.a,{url:G["Google Satellite"].url,attribution:G["Google Satellite"].attribution}),a&&Object(b.jsx)(lt.a,{position:a})]})},dt=function(e){var t=Object(h.c)((function(e){return e.samples})),a=t.geojson.features.filter((function(e){return e.properties[be]===t.selected}))[0],c=Object(h.b)(),s=Object(n.useState)({}),r=Object(i.a)(s,2),l=r[0],o=r[1];Object(n.useEffect)((function(){t.selected&&Object.values(l).forEach((function(e){e.panTo([a.geometry.coordinates[1],a.geometry.coordinates[0]])}))}),[t.selected]),Object(n.useEffect)((function(){var e={},a=t.phenology,n=a.start_date,c=a.end_date;n=new Date(n),c=new Date(c);for(var s=n;s<=c;){var r="".concat(s.getUTCFullYear(),"-").concat(s.getUTCMonth()+1);e[r]=l[r],s.setUTCMonth(s.getUTCMonth()+1)}o(e)}),[t.phenology]);return Object(b.jsxs)("div",{className:"map-carousel h-100 d-flex overflow-auto",children:[Object(b.jsx)("div",{className:"ps-2 py-2 pe-1",style:{width:280,flexShrink:0},children:Object(b.jsx)(z.a,{className:"w-100 h-100",children:Object(b.jsxs)(z.a.Body,{className:"p-2",children:[Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"phenology_start_date",className:"mb-2",children:[Object(b.jsx)(J.a.Label,{column:!0,sm:"3",children:"From"}),Object(b.jsx)(Re.a,{sm:"9",children:Object(b.jsx)(J.a.Control,{type:"month",name:"phenology_start_date",value:t.phenology.start_date,onChange:function(e){return c(re({start_date:e.target.value}))},className:"w-100"})})]}),Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"phenology_end_date",children:[Object(b.jsx)(J.a.Label,{column:!0,sm:"3",children:"To"}),Object(b.jsx)(Re.a,{sm:"9",children:Object(b.jsx)(J.a.Control,{type:"month",name:"phenology_end_date",value:t.phenology.end_date,onChange:function(e){return c(re({end_date:e.target.value}))}})})]}),Object(b.jsx)(we.a,{className:"pt-2 justify-content-center",children:Object(b.jsx)(Re.a,{sm:"auto",children:Object(b.jsx)(L.a,{onClick:function(e){Ve.a.get("phenology/monthly_composite",{baseURL:"/servir/rice-explorer",params:{start_date:t.phenology.start_date,end_date:t.phenology.end_date}}).then((function(e){var t=e.data;Object.keys(l).forEach((function(e){var a=t[e];new $.a.TileLayer(a).addTo(l[e])}))}))},children:"Load Composites"})})})]})})}),Object.keys(l).map((function(e){return Object(b.jsx)("div",{className:"px-1 py-2",style:{width:250,flexShrink:0},children:Object(b.jsxs)(z.a,{className:"w-100 h-100",children:[Object(b.jsx)(z.a.Header,{className:"py-0 text-center",children:e}),Object(b.jsx)(z.a.Body,{className:"p-0",children:Object(b.jsx)(ot,{point:a&&Object(_.a)(a.geometry.coordinates).reverse(),date:e,setMapObj:o})})]},e)})}))]})};function jt(e){var t=e.info,a=Object(h.c)((function(e){return e.appName}));return Object(b.jsxs)("div",{className:"w-100 h-100 d-flex flex-column",children:[Object(b.jsx)("div",{className:"map-container",children:Object(b.jsx)(Te,{info:t})}),"phenology"===a?Object(b.jsx)("div",{className:"map-carousel-container",children:Object(b.jsx)(dt,{})}):null]})}var ut=a(106),bt="Datasets",pt="Seasons";function ht(e){var t=Object(h.c)((function(e){return e.csrfToken})),a=Object(h.c)((function(e){return e.dataset})),c=Object(h.c)((function(e){return e.seasons})),s=Object(h.c)((function(e){return e.samples})),r=Object(h.c)((function(e){return e.editing})),l=Object(h.b)(),o=Object(n.useState)(!1),d=Object(i.a)(o,2),u=d[0],p=d[1],m=Object(n.useState)(!1),O=Object(i.a)(m,2),f=O[0],x=O[1];return Object(b.jsx)("div",{className:"sidebar h-100 flex-column",children:Object(b.jsxs)(Le.a,{defaultActiveKey:bt,unmountOnExit:!1,children:[Object(b.jsx)(we.a,{className:"tabs-nav g-0 flex-wrap",children:Object(b.jsxs)(j.a,{variant:"pills",className:"h-100",children:[Object(b.jsx)(Re.a,{className:"h-100 align-items-center p-1",children:Object(b.jsx)(j.a.Link,{className:"tab-title align-middle w-100 h-100 h6",eventKey:bt,children:bt})}),Object(b.jsx)(Re.a,{className:"h-100 align-items-center p-1",children:Object(b.jsx)(j.a.Link,{className:"tab-title align-middle h-100 w-100 h6",eventKey:pt,children:pt})})]})}),Object(b.jsx)(we.a,{className:"tabs-content g-0 p-2",children:Object(b.jsx)(Re.a,{children:Object(b.jsxs)(Pe.a,{children:[Object(b.jsx)(De.a,{eventKey:bt,children:Object(b.jsxs)(J.a,{method:"POST",noValidate:!0,validated:f,onSubmit:function(e){if(e.preventDefault(),!1===e.currentTarget.checkValidity())return e.stopPropagation(),void x(!0);x(!1);var n={};n.dataset=T.a.cloneDeep(a),delete n.dataset.boundary_file;var c=T.a.cloneDeep(s.geojson);c.features.forEach((function(e){Object.keys(e.properties).forEach((function(t){t.endsWith("_feature")&&delete e.properties[t]}))})),n.samples=c,n.phenology_dates=s.phenology,Ve.a.post("phenology/",n,{baseURL:"/servir/rice-explorer",headers:{"X-CSRFToken":t}}).then((function(e){e.data.features.forEach((function(e){c.features.filter((function(t){return t.properties[be]===e.properties[be]}))[0].properties=e.properties})),l(ae(c)),p(!1)})).catch((function(e){p(!1),alert(e)})),p(!0)},children:[Object(b.jsx)(Je,{}),Object(b.jsx)(L.a,{className:"w-100",type:"submit",variant:u?"secondary":"primary",disabled:u,children:u?Object(b.jsxs)("div",{children:["Running...",Object(b.jsx)(Ee.a,{as:"span",animation:"border",size:"sm",role:"status"})]}):"Save settings"})]})}),Object(b.jsxs)(De.a,{eventKey:pt,children:[w.map((function(e){return Object(b.jsx)(tt,{name:e,inputThres:!1,readOnly:r},e)})),Object(b.jsx)(L.a,{className:"w-100",onClick:function(e){0!==s.geojson.features.length?Object.keys(c).forEach((function(e){var t=c[e];if(t.on){var a=new Date(t.start),n=new Date(t.end),r=[];if(s.geojson.features.forEach((function(e){e.properties[s.classProperty.name]===s.classProperty.positiveValue&&Object.entries(e.properties).forEach((function(e){var t=Object(i.a)(e,2),c=t[0],s=t[1];if(c.endsWith("_feature")){var l=c.split("_"),o=new Date(Number.parseInt(l[l.length-2])).getTime();a.getTime()<=o&&o<=n.getTime()&&r.push(s)}}))})),0===r.length)return;var o=function(e){var t=ut.a(e,.25),a=ut.a(e,.75),n=a-t,c=a+1.5*n,s=t-1.5*n;return e.filter((function(e){return e>s&&e<c}))}(r),d=T.a.sum(o)/o.length,j=Math.sqrt(T.a.sum(T.a.map(o,(function(e){return Math.pow(e-d,2)})))/o.length),u=Ze[e];l(u({min:(d-j).toFixed(2),max:(d+j).toFixed(2)}))}})):alert("Please upload the ground truth samples first.")},children:"Refresh"})]})]})})})]})})}var mt=a(328),Ot=a(151),ft={"Random Forest":{numberOfTrees:{type:"int",required:!0,default:200,description:"The number of decision trees to create."},variablesPerSplit:{type:"int",default:null,description:"The number of variables per split. If unspecified, uses the square root of the number of variables."},minLeafPopulation:{type:"int",default:1,description:"Only create nodes whose training set contains at least this many points."},bagFraction:{type:"float",default:.5,description:"The fraction of input to bag per tree."},maxNodes:{type:"int",default:null,description:"The maximum number of leaf nodes in each tree. If unspecified, defaults to no limit."},seed:{type:"int",default:0,description:"The randomization seed."}},"Gradient Tree Boost":{}},xt=Object(m.b)({name:"classification",initialState:{start_date:null,end_date:null,training_ratio:.7,model:"",model_specs:{}},reducers:{update:function(e,t){return Object(Z.a)(Object(Z.a)({},e),t.payload)},updateModelSpecs:function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{model_specs:Object(Z.a)(Object(Z.a)({},e.model_specs),t.payload)})},changeModel:function(e,t){t.payload&&t.payload!==e.model&&(e.model_specs={},Object.keys(ft[t.payload]).forEach((function(a){"default"in ft[t.payload][a]?e.model_specs[a]=ft[t.payload][a].default:e.model_specs[a]=null}))),e.model=t.payload}}}),gt=xt.actions,yt=gt.update,vt=gt.updateModelSpecs,Nt=gt.changeModel,St=xt.reducer,_t=a(326),At="Datasets",Ct="Samples",It="Classification",kt=function(e){var t=e.setInfo,a=Object(h.c)((function(e){return e.csrfToken})),c=Object(h.c)((function(e){return e.dataset})),s=Object(h.c)((function(e){return e.classification})),r=Object(h.c)((function(e){return e.samples})),l=Object(h.b)(),o=Object(n.useState)(!1),d=Object(i.a)(o,2),u=d[0],p=d[1],m=Object(n.useState)(!1),O=Object(i.a)(m,2),f=O[0],x=O[1],g=Object(n.useState)({}),y=Object(i.a)(g,2),v=(y[0],y[1],function(e,t){"model"===e?l(Nt(t)):e.startsWith("model")?l(vt(Object(He.a)({},e.split(".")[1],t))):l(yt(Object(He.a)({},e,t)))});return Object(b.jsx)("div",{className:"sidebar h-100 flex-column",children:Object(b.jsx)(J.a,{method:"POST",onSubmit:function(e){if(e.preventDefault(),!1===e.currentTarget.checkValidity())return e.stopPropagation(),void p(!0);p(!1);var n=new FormData,i={};i.dataset=T.a.cloneDeep(c),i.dataset.boundary_file&&(n.append("boundary_file",i.dataset.boundary_file),delete i.dataset.boundary_file),i.classification=T.a.cloneDeep(s),i.classification.class_property=r.classProperty;var l=i.classification.model_specs;for(var o in l)null===l[o]&&delete l[o];n.append("json",new Blob([JSON.stringify(i)],{type:"application/json"})),0!==r.geojson.features.length&&n.append("samples",new Blob([JSON.stringify(r.geojson)],{type:"application/json"})),Ve.a.post("classification/",n,{baseURL:"/servir/rice-explorer",headers:{"X-CSRFToken":a}}).then((function(e){var a=e.data,n=[],c="classification_result",s={layer:new $.a.TileLayer(a[c].tile_url),name:c,url:a[c].download_url};n.push(s);var r="";if(a.area&&(r+="Rice area: <b>"+a.area.toFixed(3)+" ha</b>\n"),a.confusion_matrix){var i=JSON.parse(a.confusion_matrix);r+='Confusion matrix:\n          <table class="table">\n          <thead>\n            <tr>\n              <th scope="col"></th>\n              <th scope="col">0</th>\n              <th scope="col">1</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <th scope="row">0</td>\n              <td >'.concat(i[0][0],"</td>\n              <td >").concat(i[0][1],'</td>\n            </tr>\n            <tr>\n              <th scope="row">1</td>\n              <td >').concat(i[1][0],"</td>\n              <td >").concat(i[1][0],"</td>\n            </tr>\n          </tbody>\n          </table>\n          ")}_e(n),t(r),x(!1)})).catch((function(e){x(!1),alert(e)})),x(!0),Ce()},noValidate:!0,validated:u,children:Object(b.jsxs)(Le.a,{defaultActiveKey:At,unmountOnExit:!1,children:[Object(b.jsx)(we.a,{className:"tabs-nav g-0 flex-wrap",children:Object(b.jsxs)(j.a,{variant:"pills",className:"h-100",children:[Object(b.jsx)(Re.a,{className:"h-100 align-items-center p-1",children:Object(b.jsx)(j.a.Link,{className:"tab-title align-middle w-100 h-100 h6 mb-0",eventKey:At,children:At})}),Object(b.jsx)(Re.a,{className:"h-100 align-items-center p-1",children:Object(b.jsx)(j.a.Link,{className:"tab-title align-middle h-100 w-100 h6 mb-0",eventKey:Ct,children:Ct})}),Object(b.jsx)(Re.a,{className:"h-100 align-items-center p-1",children:Object(b.jsx)(j.a.Link,{className:"tab-title align-middle h-100 w-100 h6 mb-0",eventKey:It,children:It})})]})}),Object(b.jsx)(we.a,{className:"tabs-content g-0 p-2",children:Object(b.jsx)(Re.a,{children:Object(b.jsxs)(Pe.a,{children:[Object(b.jsx)(De.a,{eventKey:At,children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)(Je,{}),Object(b.jsx)(qe,{})]})}),Object(b.jsx)(De.a,{eventKey:Ct,children:Object(b.jsx)(Oe,{})}),Object(b.jsxs)(De.a,{eventKey:It,children:[Object(b.jsxs)(z.a,{className:"mb-2 border-secondary",children:[Object(b.jsx)(z.a.Header,{children:Object(b.jsx)("h6",{className:"m-0 p-0",children:"Image Date Range"})}),Object(b.jsxs)(z.a.Body,{children:[Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"date_start",className:"mb-2 align-items-center",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:4,children:"Start Date:"}),Object(b.jsx)(Re.a,{xs:8,children:Object(b.jsx)(J.a.Control,{type:"date",value:s.start_date,onChange:function(e){return v("start_date",e.target.value)}})})]}),Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"date_end",className:"mb-2 align-items-center",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:4,children:"End Date:"}),Object(b.jsx)(Re.a,{xs:8,children:Object(b.jsx)(J.a.Control,{type:"date",value:s.end_date,onChange:function(e){return v("end_date",e.target.value)}})})]})]})]}),Object(b.jsxs)(z.a,{className:"mb-2 border-secondary",children:[Object(b.jsx)(z.a.Header,{children:Object(b.jsx)("h6",{className:"m-0 p-0",children:"Classification Details"})}),Object(b.jsxs)(z.a.Body,{children:[Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"train_test_ratio",className:"mb-2 align-items-center",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:4,children:"Training Ratio:"}),Object(b.jsx)(Re.a,{xs:8,children:Object(b.jsx)(J.a.Control,{type:"number",step:"0.05",value:s.training_ratio,onChange:function(e){return v("training_ratio",e.target.value)}})})]}),Object(b.jsxs)(J.a.Group,{as:we.a,controlId:"model",className:"mb-2 align-items-center",children:[Object(b.jsx)(J.a.Label,{column:!0,xs:4,children:"Model:"}),Object(b.jsx)(Re.a,{xs:8,children:Object(b.jsxs)(J.a.Select,{value:s.model,onChange:function(e){return v("model",e.target.value)},children:[Object(b.jsx)("option",{},""),Object.keys(ft).map((function(e){return Object(b.jsx)("option",{children:e},e)}))]})})]}),s.model&&Object.keys(ft[s.model]).map((function(e){return Object(b.jsx)(Tt,{specName:e,handleChange:v})}))]})]}),Object(b.jsx)(L.a,{className:"w-100",type:"submit",variant:f?"secondary":"primary",disabled:f,children:f?Object(b.jsxs)("div",{children:["Running...",Object(b.jsx)(Ee.a,{as:"span",animation:"border",size:"sm",role:"status"})]}):"Run"})]})]})})})]})})})},Tt=function(e){var t=e.specName,a=e.handleChange,n=Object(h.c)((function(e){return e.classification})),c=n.model,s=function(e){a("model.".concat(t),e.target.value)};return Object(b.jsxs)(J.a.Group,{as:we.a,controlId:t,className:"mb-2 align-items-center",children:[Object(b.jsxs)(J.a.Label,{column:!0,xs:4,children:[t,"  ",Object(b.jsx)(mt.a,{trigger:"hover",placement:"right",overlay:Object(b.jsx)(Ot.a,{children:Object(b.jsx)(Ot.a.Body,{children:ft[c][t].description})}),children:Object(b.jsx)(_t.a,{})})]}),Object(b.jsx)(Re.a,{xs:8,children:function(){switch(ft[c][t].type){case"int":return Object(b.jsx)(J.a.Control,{type:"number",placeholder:"Leave blank to use default value",step:"1",value:n.model_specs[t],onChange:s});case"float":return Object(b.jsx)(J.a.Control,{type:"number",placeholder:"Leave blank to use default value",step:"0.1",value:n.model_specs[t],onChange:s});case"string":return Object(b.jsx)(J.a.Control,{type:"text",value:n.model_specs[t],onChange:s});case"select":return Object(b.jsx)(J.a.Select,{value:n.model_specs[t],onChange:s,children:ft[c][t].options.map((function(e){return Object(b.jsx)("option",{children:e},e)}))});default:return Object(b.jsx)(b.Fragment,{})}}()})]})};a(303);var Lt=function(){var e=Object(l.f)(),t=Object(h.b)(),a=(Object(h.c)((function(e){return e.appName})),Object(n.useState)("Please run the app to show area of rice.")),c=Object(i.a)(a,2),s=c[0],r=c[1];return Object(n.useEffect)((function(){var e=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var c=a[n].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken");t(rt(e))}),[]),Object(n.useEffect)((function(){var a=e.pathname.split("/"),n=a[a.length-1]||"home";t(x(O[n]))}),[e]),Object(b.jsxs)("div",{className:"d-flex flex-column vh-100 vw-100",children:[Object(b.jsx)(p,{}),Object(b.jsx)(S,{}),Object(b.jsxs)("div",{className:"main d-flex flex-row h-100 w-100",children:[Object(b.jsx)(l.c,{children:Object(b.jsx)(l.a,{exact:!0,path:"/",children:Object(b.jsx)(y,{})})}),Object(b.jsx)("div",{className:"left-panel",children:Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.a,{exact:!0,path:"/empirical",children:Object(b.jsx)(ct,{setInfo:r})}),Object(b.jsx)(l.a,{exact:!0,path:"/phenology",children:Object(b.jsx)(ht,{})}),Object(b.jsx)(l.a,{exact:!0,path:"/classification",children:Object(b.jsx)(kt,{setInfo:r})})]})}),Object(b.jsx)("div",{className:"mid-panel h-100",children:Object(b.jsx)(l.c,{children:Object(b.jsx)(l.a,{exact:!0,path:["/empirical","/phenology","/classification"],children:Object(b.jsx)(jt,{info:s})})})}),Object(b.jsx)(l.a,{exact:!0,path:"/phenology",children:Object(b.jsx)("div",{className:"right-panel",children:Object(b.jsx)(pe,{})})})]})]})},wt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,334)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))},Rt=(a(304),Object(m.a)({reducer:{csrfToken:it,dataset:ze,seasons:et,samples:ie,editing:M,appStatus:N,appName:g,classification:St}}));r.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(u.a,{basename:"/servir/rice-explorer",children:Object(b.jsx)(h.a,{store:Rt,children:Object(b.jsx)(Lt,{})})})}),document.getElementById("root")),wt()}},[[306,1,2]]]);
//# sourceMappingURL=main.02a91469.chunk.js.map